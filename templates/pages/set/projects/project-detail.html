{% extends 'layouts/main.html' %}
{% block content %}
<div class="bg-white p-6 rounded-2xl shadow-soft dark:bg-slate-900 max-w-12xl mx-auto">
  <nav class="flex mb-5" aria-label="Breadcrumb">
    <ol class="inline-flex items-center space-x-1 md:space-x-3">
      <li class="inline-flex items-center">
        <a href="{% url 'set.index' %}"
          class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-indigo-600 dark:text-slate-300 dark:hover:text-indigo-400">
          <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
            <path
              d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17h12v-6.586l2.293-2.293-1.414-1.414z" />
          </svg>
          Dashboard
        </a>
      </li>
      <li>
        <div class="flex items-center">
          <svg class="w-6 h-6 text-slate-400" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M7.293 14.707l3.293-3.293L7.293 8.12l1.414-1.414 4 4-4 4-1.414-1.414z"
              clip-rule="evenodd" />
          </svg>
          <a href="{% url 'set.projects' %}"
            class="ml-1 text-sm font-medium text-slate-700 hover:text-indigo-600 dark:text-slate-300 dark:hover:text-indigo-400">Projects</a>
        </div>
      </li>
      <li>
        <div class="flex items-center">
          <svg class="w-6 h-6 text-slate-400" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M7.293 14.707l3.293-3.293L7.293 8.12l1.414-1.414 4 4-4 4-1.414-1.414z"
              clip-rule="evenodd" />
          </svg>
          <span class="ml-1 text-sm font-medium text-slate-700 dark:text-slate-300">{{project.title}}</span>
        </div>
      </li>
    </ol>
  </nav>
  <!-- Header -->
  <div class="text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300">
    <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
      <div class="flex justify-between items-start mb-8">
        <div>
          <h2 class="text-3xl font-bold text-slate-800 dark:text-slate-100 mb-1">
            {{ project.title }}
          </h2>
          <!-- <p class="text-slate-500 dark:text-slate-400 text-sm">
            {{ project.get_status_display|default:project.status }}
          </p> -->
        </div>
        <div>
          <span
            class="px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full dark:bg-green-800 dark:text-green-200">
            {{project.get_status_display|default:project.status}}
          </span>

        </div>
      </div>

      <!-- Main Info -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
        <div>
          <p class="text-sm text-slate-500 dark:text-slate-400">Team Lead</p>
          <p class="font-medium text-slate-800 dark:text-slate-200">
            {{ project.team_lead.full_name|default:"—" }}
          </p>
        </div>
        <div>
          <p class="text-sm text-slate-500 dark:text-slate-400">Priority</p>
          <p class="font-medium text-slate-800 dark:text-slate-200 capitalize">
            {{ project.get_priority_display|default:"—" }}
          </p>
        </div>
        <div>
          <p class="text-sm text-slate-500 dark:text-slate-400">Status</p>
          <p class="font-medium text-slate-800 dark:text-slate-200 capitalize">
            {{ project.get_status_display|default:project.status }}
          </p>
        </div>

        <div>
          <p class="text-sm text-slate-500 dark:text-slate-400">Start Date</p>
          <p class="font-medium text-slate-800 dark:text-slate-200">
            {{ project.start_date|date:"M d, Y" }}
          </p>
        </div>
        <div>
          <p class="text-sm text-slate-500 dark:text-slate-400">Deadline</p>
          <p class="font-medium text-slate-800 dark:text-slate-200">
            {{ project.deadline|date:"M d, Y"|default:"—" }}
          </p>
        </div>
        <div>
          <p class="text-sm text-slate-500 dark:text-slate-400">Created By</p>
          <p class="font-medium text-slate-800 dark:text-slate-200">
            {{ project.created_by.full_name|default:"—" }}
          </p>
        </div>

        <div>
          <p class="text-sm text-slate-500 dark:text-slate-400">Created At</p>
          <p class="font-medium text-slate-800 dark:text-slate-200">
            {{ project.created_at|date:"M d, Y, h:i A" }}
          </p>
        </div>
        <div>
          <p class="text-sm text-slate-500 dark:text-slate-400">Last Updated</p>
          <p class="font-medium text-slate-800 dark:text-slate-200">
            {{ project.updated_at|date:"M d, Y, h:i A"|default:"—" }}
          </p>
        </div>
      </div>

      <!-- Description -->
      <div class="mt-4">
        <h3 class="text-lg font-semibold text-slate-800 dark:text-slate-200 mb-2">
          Description
        </h3>
        <p class="text-slate-700 dark:text-slate-300 leading-relaxed whitespace-pre-line">
          {{ project.description|default:"No description provided." }}
        </p>
      </div>

      <!-- Members -->
      <div class="mt-8">
        <h3 class="text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3">
          Team Members
        </h3>
        {% if project.members.exists %}
        <ul class="grid sm:grid-cols-2 md:grid-cols-3 gap-2">
          {% for member in project.members.all %}
          <li class="flex items-center gap-2 bg-slate-50 dark:bg-slate-800 rounded-xl px-3 py-2">
            <div
              class="flex-shrink-0 h-8 w-8 rounded-full bg-indigo-100 dark:bg-slate-700 flex items-center justify-center text-sm font-semibold text-indigo-700 dark:text-indigo-300">
              <!-- {{ member.full_name|first|upper }} -->
              {% if member.get_profile_photo_url %}
              <img src="{{ member.get_profile_photo_url }}" alt="{{ member.full_name }}" class="h-8 w-8 rounded-full">
              {% else %}
              {{ member.full_name|first|upper }}
              {% endif %}
            </div>
            <div>
              <p class="text-sm font-medium text-slate-800 dark:text-slate-200">
                {{ member.full_name }}
              </p>
              <p class="text-xs text-slate-500 dark:text-slate-400">
                {{ member.get_position_display }}
              </p>
            </div>
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p class="text-slate-500 dark:text-slate-400 text-sm">No members assigned.</p>
        {% endif %}
      </div>

      <!-- Document -->
      {% if project.project_document %}
      <div class="mt-8">
        <h3 class="text-lg font-semibold text-slate-800 dark:text-slate-200 mb-2">Attached Document</h3>
        <a href="{{ project.project_document.url }}" target="_blank"
          class="inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-indigo-50 text-indigo-700 hover:bg-indigo-100 dark:bg-slate-800 dark:text-indigo-400 dark:hover:bg-slate-700">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
            <path d="M8 2a1 1 0 00-1 1v9a3 3 0 106 0V3a1 1 0 10-2 0v9a1 1 0 11-2 0V3a1 1 0 00-1-1z" />
          </svg>
          View Attached File
        </a>
      </div>
      {% endif %}
       <!-- Back button -->
  <div class="mt-8 flex justify-end">
    <a href="{% url 'set.projects' %}"
      class="px-4 py-2 rounded-xl border border-slate-300 text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-800">
      ← Back to Projects
    </a>
  </div>
</div>
{% endblock %}